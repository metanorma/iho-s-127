
[[sec_9]]
== Data quality

[[sec_9.1]]
=== Introduction

Data quality allows users and user systems to assess fitness for use
of the provided data. Data quality measures and the associated evaluation
are reported as metadata of a data product. This metadata improves
interoperability with other data products and provides usage by user
groups that the data product was not originally intended for.
The secondary users can make assessments of the data product usefulness
in their application based on the reported data quality measures.

For S-127 the following data quality elements have been included:

* Conformance to this Product Specification;
* Intended purpose of the data product;
* Completeness of the data product in terms of coverage;
* Logical Consistency;
* Positional Uncertainty and Accuracy;
* Thematic Accuracy;
* Temporal Quality;
* Aggregation measures;
* Elements specifically required for the data product
(none currently identified for S-127);
* Validation checks or conformance checks including:

** General tests for dataset integrity;
** Specific tests for a specific data model;

[[sec_9.2]]
=== Quality measure elements

The data quality measures recommended in <<IHO_S_97,part=C>> and their applicability
in S-127 are indicated in <<table_9.1>> below. NA indicates the measure
is not applicable. This table reproduces the first 4 columns of the
data quality checklist recommended elements and replaces the final
column with descriptions of the scope of the element in the context
of S-127 datasets.

[[table_9.1]]
.IHO recommended quality elements and their relevance to S-127
[cols="6"]
|===
| No. | Data quality element and sub element | Definition | DQ measure / description | Evaluation scope | Scope in S-127

| 1 | Completeness / Commission
| Excess data present in a dataset, as described by the scope.
| numberOfExcessItems / This data quality measure indicates the number
of items in the dataset, that should not have been present in the
dataset.
| dataset/dataset series | All features and info types

| 2 | Completeness / Commission
| Excess data present in a dataset, as described by the scope.
| numberOfDuplicateFeatureInstances / This data quality measure indicates the total number of exact duplications of feature instances within the data.
| dataset/dataset series | All features and info types

| 3 | Completeness / Omission
| Data absent from the dataset, as described by the scope.
| numberOfMissingItems / This data quality measure is an indicator that shows that a specific item is missing in the data.
| dataset/dataset series/spatial object type | All features and info types

| 4 | Logical Consistency / Conceptual Consistency
| Adherence to the rules of a conceptual schema.
| numberOfInvalidSurfaceOverlaps / This data quality measure is a count of the total number of erroneous overlaps within the data. Which surfaces may overlap and which must not is application dependent. Not all overlapping surfaces are necessarily erroneous.
| spatial object / spatial object type | Features with surface geometry; spatial objects of type surface

| 5 | Logical Consistency / Domain Consistency
| Adherence of the values to the value domains.
| numberOfNonconformantItems / This data quality measure is a count of all items in the dataset that are not in conformance with their value domain.
| spatial object / spatial object type | All features and info types

| 6 | Logical Consistency / Format Consistency
| Degree to which data is stored in accordance with the physical structure of the data set, as described by the scope
| physicalStructureConflictsNumber / This data quality measure is a count of all items in the dataset that are stored in conflict with the physical structure of the dataset.
| dataset/dataset series | All features and info types

| 7 | Logical Consistency / Topological Consistency
| Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope.
| rateOfFaultyPointCurveConnections / This data quality measure indicates the number of faulty link-node connections in relation to the number of supposed link-node connections. This data quality measure gives the erroneous point-curve connections in relation to the total number of point-curve connections.
| spatial object / spatial object type | Features with curve geometry; spatial objects of curve types

| 8 | Logical Consistency / Topological Consistency
| Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope.
| numberOfMissingConnectionsUndershoots / This data quality measure is a count of items in the dataset within the parameter tolerance that are mismatched due to undershoots.
| spatial object / spatial object type | Features with curve geometry; spatial objects of curve types

| 9 | Logical Consistency / Topological Consistency
| Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope.
| numberOfMissingConnectionsOvershoots / This data quality measure is a count of items in the dataset within the parameter tolerance that are mismatched due to overshoots.
| spatial object / spatial object type | Features with curve geometry; spatial objects of curve types

| 10 | Logical Consistency / Topological Consistency
| Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope.
| numberOfInvalidSlivers / This data quality measure is a count of all items in the dataset that are invalid sliver surfaces. A sliver is an unintended area that occurs when adjacent surfaces are not digitized properly. The borders of the adjacent surfaces may unintentionally gap or overlap to cause a topological error.
| dataset / dataset series | Features with surface geometry; spatial objects of type surface

| 11 | Logical Consistency / Topological Consistency
| Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope.
| numberOfInvalidSelfIntersects / This data quality measure is a count of all items in the dataset that illegally intersect with themselves.
| spatial object / spatial object type
| Features with surface geometry; spatial objects of type surface or curve

| 12 | Logical Consistency / Topological Consistency
| Correctness of the explicitly encoded topological characteristics of the dataset, as described by the scope.
| numberOfInvalidSelfOverlap / This data quality measure is a count of all items in the dataset that illegally self-overlap.
| spatial object / spatial object type
| Features with surface geometry; spatial objects of type surface or curve

| 13 | Positional Accuracy / Absolute or External Accuracy
| Closeness of reported coordinative values to values accepted as or being true.
| Root Mean Square Error / Standard deviation, where the true value is not estimated from the observations but known a priori.
| spatial object / spatial object type
| objects that have coordinative values associated.

| 14 | Positional Accuracy / Vertical Position Accuracy
| Closeness of reported coordinative values to values accepted as or being true.
| linearMapAccuracy2Sigma / Half length of the interval defined by an upper and lower limit in which the true value lies with probability 95%.
| spatial object / spatial object type
| NA. S-127 does not include vertical measurements.

| 15 | Positional Accuracy / Horizontal Position Accuracy
| Closeness of reported coordinative values to values accepted as or being true.
| linearMapAccuracy2Sigma / Half length of the interval defined by an upper and lower limit in which the true value lies with probability 95%.
| spatial object / spatial object type
| objects that have a horizontal coordinate values associated.

| 16 | Positional Accuracy / Gridded Data Position Accuracy
| Closeness of reported coordinative values to values accepted as or being true.
| Root mean square error of planimetry / Radius of a circle around the given point, in which the true value lies with probability P.
| spatial object / spatial object type
| NA. S-127 does not have features with gridded geometry

| 17 | Temporal Quality / Temporal Consistency
| Consistency with time.
| Correctness of ordered events or sequences, if reported.
| dataset/dataset series/spatial object type
| Features with time intervals, fixed/periodic date ranges, schedules.

| 18 | Thematic Accuracy / ThematicClassificationCorrectness
| Comparison of the classes assigned to features or their attributes to a universe of discourse.
| miscalculationRate / This data quality measure indicates the number of incorrectly classified features in relation to the number of features that are supposed to be there. [Adapted from <<ISO_19157>>] This is a RATE which is a ratio, and is expressed as a REAL number representing the rational fraction corresponding to the numerator and denominator of the ratio. For example, if there are 1 items that are classified incorrectly and there are 100 of the items in the dataset then the ratio is 1/100 and the reported rate = 0.01.
| dataset/dataset series/spatial object type
| All features and info types

| 19 | Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up for a product to conform to the specification.
| DataProductSpecificationPassed / This data quality measure is a boolean indicating that all requirements in the referred data product specification are fulfilled.
| dataset/dataset series/spatial object type
| Dataset as a whole

| 20 | Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up for a product to conform to the specification.
| DataProductSpecificationFailRate / This data quality measure is a number indicating the number of data product specification requirements that are not fulfilled by the current product/dataset in relation to the total number of data product specification requirements.
| dataset/dataset series/spatial object type
| Dataset as a whole

|===

[[sec_9.3]]
=== Test methods

Test methods consist of executing the relevant tests from Annex E
(Validation Checks) for each quality element in <<table_9.1>> and
counting the number of instances in the dataset which fail the checks
for that quality element.

Note that in some cases "executing the relevant test" may involve
comparing the encoded S-127 dataset to the source material by visual
means (e.g., for measures 17 and 18). For tests requiring visual comparison
of encoded data to source material, sampling methods may be used if
the volume of data precludes checking all the relevant data objects.

[[sec_9.3.1]]
==== Accuracy computations

Recommendations for Positional Accuracy / Absolute or External Accuracy:

Maximum RMSE (horizontal) = E / 10000

Where:

E = Denominator of intended scale of mapping

[[sec_9.4]]
=== Data quality testing and reporting

S-127 products must be tested with the S-127 specific checks prior
to release by the data producer. The data producer must review the
check results and address any issues to ensure sufficient quality
of the data products. The checks are a mix of data format validation
checks, conformance to standard checks and logical consistency checks.
The checks are listed in Annex E.

Production and certification processes for S-127 data should include
a standalone quality report which provides full information on the
original results (with evaluation procedures and measures applied).

The dataset or exchange set metadata that is distributed with the
exchange set may describe only the aggregated result with a reference
to the original results described in the standalone quality report.
The aggregated Data Quality result provides an indication if the dataset
has passed conformance to the Data Product Specification.

Data Quality Measure Aggregation results should be included to indicate
if the dataset/dataset series have passed the Product Specifications.
The elements which must be included are described in <<table_9.2>>.

[[table_9.2]]
.Elements of data quality aggregated report (extract from <<IHO_S_97,part=C>> checklist)
[cols="5"]
|===
h| Data quality element and sub element h| Definition h| DQ measure / description h| Evaluation scope h| Applicable to spatial representation types

| Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up
for a product to conform to the specification.
| DataProductSpecificationPassed / This data quality measure is a
boolean indicating that all requirements
in the referred data product specification are fulfilled.
| dataset | All features and information types of the dataset

| Aggregation Measures / AggregationMeasures
| In a data product specification, several requirements are set up
for a product to conform to the specification.
| DataProductSpecificationFailRate / This data quality measure is
a number indicating the number of data product specification requirements
that are not fulfilled by the current product/dataset in relation
to the total number of data product specification requirements.
| dataset | All features and information types of the dataset

|===
