
[[sec_14]]
== Metadata

[[sec_14.1]]
=== Introduction

The MTM metadata specification conforms to the S-100 metadata specification
in <<IHO_S_100,part=4a>>, which is a profile of the <<ISO_19115_1>> standard. These
documents provide a structure for describing digital geographic data
and define metadata elements, a common set of metadata terminology,
definitions, and extension procedures.

The overall structure of metadata in S-127 exchange sets is the same
as in S-100, and is depicted in <<fig_31>>. Metadata in exchange sets
consists of discovery metadata for the datasets and support files
in the exchange set (classes S100_DatasetDiscoveryMetadata and
S100_SupportFileDiscoveryMetadata), metadata in <<ISO_19115_1>> format
for datasets, and metadata about any feature, portrayal, or interoperability
catalogues which are in the exchange set (S100_CatalogueMetadata).

The discovery metadata classes have numerous attributes which enable
important information about the datasets and accompanying support
files to be examined without the need to process the data, for example
decrypt, decompress, load etc. Other catalogues such as feature and
portrayal catalogues can be included in the exchange set in support
of the datasets.

More detailed information for the classes is depicted in <<fig_32>>
and details about the metadata classes are provided in <<sec_14.2;to!sec_14.5>>.

[[fig_31]]
.Metadata in exchange catalogue
image::figure-31.png[]


[[fig_32]]
.S-127 Exchange catalogue and discovery metadata
image::figure-32.png[]

NOTE: Types with CI_, EX_, and MD_ prefixes are from packages defined
in <<ISO_19115_1>> and 19115-3 and adapted by S-100. Types with S100_
prefix are from packages defined in S-100.

NOTE: When a dataset is terminated, the purpose metadata field is
set to 3 (terminated), and the editionNumber metadata field is set
to 0. All inapplicable but mandatory metadata fields must be nilled.

In <<fig_32>> and the following clauses, classes show only those attributes
which are used in S-127 exchange catalogues. Similarly, enumerations
show only those values which are allowed in S-127 exchange catalogues.

[[sec_14.2]]
=== Dataset metadata

Dataset metadata is intended to describe information about a dataset.
It facilitates the management and exploitation of data and is an important
requirement for understanding the characteristics of a dataset.
Whereas dataset metadata is usually fairly comprehensive, there is
also a requirement for a constrained subset of metadata elements that
are usually required for discovery purposes. Discovery metadata are
often used for building web catalogues, and can help users determine
whether a product or service is fit for purpose and where they can
be obtained.

[[sec_14.2.1]]
==== Metadata for new datasets and new editions

Dataset discovery metadata for new datasets and new editions of published
datasets is described in <<table_14.1>>.

[[table_14.1]]
.Dataset discovery metadata
[cols="5"]
|===
h| Name h| Multiplicity h| Value h| Type h| Remarks

| S100_DataSetDiscoveryMetadata | | | Class
| The following S-100 attributes are not used: verticalDatum, soundingDatum,
optimumDisplayScale, maximumDisplayScale, minimumDisplayScale.

| fileName | 1 | | CharacterString | Dataset file name (see <<sec_11.6>>)

| filePath | 1 | | CharacterString | Full path from the exchange set root directory

| description | 1 | | CharacterString
| Short description of the area covered by dataset, e.g., area, harbour,
or port name, between two named locations etc.

| dataProtection | 0..1 | | Boolean
| TRUE: Encrypted +
FALSE: Unencrypted

| protectionScheme | 0..1 | | S100_ProtectionScheme | See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| digitalSignatureReference | 1 | | S100_DigitalSignature
| Specifies the algorithm used to compute digitalSignatureValue. +
See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| digitalSignatureValue | 1 | | S100_DigitalSignatureValue
| The value resulting from application of digitalSignatureReference. +
Implemented as the digital signature format specified in <<IHO_S_100,part=15>>.

| copyright | 0..1 | | MD_LegalConstraints>MD_RestrictionCode<copyright> (<<ISO_19115_1>>)
| "copyright" for copyrighted datasets, omitted otherwise

| classification | 0..1 | (one of the literals from the ISO codelist)
| ClassMD_SecurityConstraints>MD_ClassificationCode (codelist) <<ISO_19115_1>>
a|

. unclassified
. restricted
. confidential
. secret
. top secret
. sensitive but unclassified
. for official use only
. protected
. limited distribution

| purpose | 1 | {1}, {2} | MD_Identification>purpose (character string)
a|

. New dataset
. New edition

| specificUsage | 1 | | MD_USAGE>specificUsage(character string)MD_USAGE>userContactInfo(CI_Responsibility)
| brief description of the resource and/or resource series usage

| editionNumber | 1 | | CharacterString
| When a dataset is initially created, the edition number "1" is assigned to it. The edition number is increased by one with each new edition.

| issueDate | 1 | | Date | Date on which the dataset was generated.

| issueTime | 0..1 | | Time | Encoded only if time of issue is significant.

| productSpecification | 1 | | S100_ProductSpecification
| See Notes below this table for constraints on values.

| producingAgency | 1 | | CI_Responsibility>CI_Organisation or CI_Responsibility>CI_Individual
| Party responsible for generating the dataset. +
See <<IHO_S_100,table=4a-2>> and <<IHO_S_100,table=4a-3>>.

| horizontalDatumReference | 1 | EPSG | CharacterString |

| horizontalDatumValue | 1 | 4326 | Integer | WGS84


| epoch | 0..1 | | CharacterString
| For example, G1762 for the 2013-10-16 realization of the geodetic datum for WGS84

| dataType | 1 | GML | S100_DataFormat | The only value allowed is "GML".

| dataTypeVersion | 1 | 3.2.1 | CharacterString |

| dataCoverage | 1..* | | S100_DataCoverage
| See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>. A new or new-edition S-127 dataset must have at least one coverage.

| comment | 0..1 | | CharacterString | Any additional Information

| layerID | 1..* | S-101 | CharacterString | Dataset must be used with ENC in an ECDIS. +
Mandatory for S-127 new datasets and new editions.

| defaultLocale | 1 | | PT_Locale | See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| otherLocale | 0..* | | PT_Locale | See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| metadataFileIdentifier | 1 | | CharacterString | For example, identifier for <<ISO_19115_3>> metadata file

| metadataPointOfContact | 1 | | CI_Responsibility>CI_Individual or CI_Responsibility>CI_Organisation
| See <<IHO_S_100,table=4a-2>> and <<IHO_S_100,table=4a-3>>.

| metadataDateStamp | 1 | | Date
| Metadata creation date, which may or may not be the dataset creation date

| metadataLanguage | 1..* | | CharacterString |

| -- | 0..* | | Aggregation S100_SupportFileDiscoveryMetadata
| One for each support file linked to this dataset and present in the exchange set.

|===


NOTE: Attribute _productSpecification_: The values of sub-attributes
_name_ and _version_ must correspond to this version of the S-127
product specification. (<<sec_4.2>>). The value of sub-attribute _number_
must be the number assigned to this version of the S-127 product specification
in the GI registry.

[[sec_14.2.2]]
==== Update and cancellation dataset metadata

Update dataset metadata (<<table_14.2>>) is intended to describe information
about an update dataset. It facilitates the management and exploitation
of data and is an important requirement for understanding the characteristics
of an update dataset. Whereas dataset metadata is usually fairly comprehensive,
metadata for update datasets only describe the issue date and sequential
relation to the base dataset.

Update dataset discovery metadata omits the _dataCoverage_, _specificUsage_
and _layerID_ metadata attributes.

[[table_14.2]]
.Update dataset metadata
[cols="5"]
|===
h| Name h| Multiplicity h| Value h| Type h| Remarks

| S100_DataSetDiscoveryMetadata | | | Class
| The following S-100 attributes are not used for update datasets:
verticalDatum, soundingDatum, optimumDisplayScale, maximumDisplayScale,
minimumDisplayScale, dataCoverage, specificUsage, layerID.

| fileName | 1 | | CharacterString | Dataset file name (see <<sec_11.7>>)

| filePath | 1 | | CharacterString | Full path from the exchange set
root directory

| description | 1 | | CharacterString | Brief description of the update.

| dataProtection | 0..1 | | Boolean | Value must be same as base dataset.

| protectionScheme | 0..1 | | S100_ProtectionScheme | Value must be
same as base dataset.

| digitalSignatureReference | 1 | | S100_DigitalSignature
| Specifies the algorithm used tocompute digitalSignatureValue. +
See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| digitalSignatureValue | 1 | | S100_DigitalSignatureValue
| The value resulting from application of digitalSignatureReference. +
Implemented as the digital signature format specified in <<IHO_S_100,part=15>>.

| copyright | 0..1 | | MD_LegalConstraints>MD_RestrictionCode<copyright> (<<ISO_19115_1>>)
| Value must be same as base dataset.

| classification | 0..1 | (one of the literals from the ISO codelist)
| ClassMD_SecurityConstraints>MD_ClassificationCode (codelist)
| Value must be same as base dataset.

| purpose | 1 | {3}, {4} | CharacterString
a|
[start=3]
. Update
. Cancellation

| editionNumber | 1 | | CharacterString | Value must be same as base dataset.

| updateNumber | 1 | | CharacterString | Update sequence number, must match file name.

| updateApplicationDate | 1 | | Date | Date of update

| issueDate | 1 | | Date | Date on which the dataset was generated.

| issueTime | 0..1 | | Time
| Encoded only if time of issue is significant such as when more than one update is planned in a day.

| productSpecification | 1 | | S100_ProductSpecification | Value must be same as base dataset.

| producingAgency | 1 | | CI_Responsibility>CI_Organisation or CI_Responsibility>CI_Individual
| Party responsible for generating the dataset. +
See <<IHO_S_100,table=4a-2>> and <<IHO_S_100,table=4a-3>>.

| horizontalDatumReference | 1 | EPSG | CharacterString |

| horizontalDatumValue | 1 | 4326 | Integer | WGS84

| epoch | 0..1 | | CharacterString | Must be same as base dataset

| dataType | 1 | GML | CharacterString |

| dataTypeVersion | 1 | 3.2.1 | CharacterString |

| comment | 0..1 | | CharacterString | Any additional Information

| defaultLocale | 1 | | PT_Locale | Must be same as base dataset. +
See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| otherLocale | 0..* | | PT_Locale
| Must be same as base dataset. +
See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| metadataFileIdentifier | 1 | | CharacterString
| For example, for <<ISO_19115_3>> metadata file

| metadataPointOfContact | 1 |
| CI_Responsibility>CI_Individual or CI_Responsibility>CI_Organisation
| See <<IHO_S_100,table=4a-2>> and <<IHO_S_100,table=4a-3>>.

| metadataDateStamp | 1 | | Date
| Metadata creation date, which may or may not be the dataset creation date

| metadataLanguage | 1..* | | CharacterString
| Must be same as base dataset

| -- | 0..* | | Aggregation S100_SupportFileDiscoveryMetadata
| One for each support file that is referenced by the update dataset
and present in the exchange set.

|===


[[sec_14.3]]
=== Support file metadata

Support file metadata (<<table_14.3>>) is intended to describe information
about a data resource. It facilitates the management and exploitation
of data and is an important requirement for understanding the characteristics
of a data resource.

[[table_14.3]]
.Support file metadata
[cols="5"]
|===
h| Name h| Multiplicity h| Value h| Type h| Remarks

| S100_SupportFileDiscoveryMetadata | | | Class |

| fileName | 1 | | CharacterString |

| fileLocation | 1 | | CharacterString
| Path relative to the root directory of the exchange set. The location
of the file after the exchange set is unpacked into directory <EXCH_ROOT>
will be<EXCH_ROOT>/<filePath>/<filename>

| purpose | 1 | | S100_SupportFilePurpose
| new, replacement, or deletion. +
Values "replacement" and "deletion" are allowed only in update datasets.

| editionNumber | 1 | | CharacterString
| When a dataset is initially created, the edition number 1 is assigned
to it. The edition number is increased by 1 at each new edition. Edition
number remains the same for a re-issue

| issueDate | 1 | | Date |

| supportFileSpecification | 1 | | S100_SupportFileSpecification
| See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| dataType | 1 | | S100_SupportFileFormat
| The only values allowed for support files referenced in datasets
are: ASCII (for text files), TIFF, and HTML. +
Values XML, XSLT, and LUA are reserved for portrayal catalogue files.

| otherDataTypeDescription | 0..1 | | CharacterString |

| comment | 0..1 | | CharacterString |

| digitalSignatureReference | 0..1 | | S100_DigitalSignature
| Specifies the algorithm used to compute digitalSignatureValue. +
See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| digitalSignatureValue | 0..1 | | S100_DigitalSignatureValue
| The value resulting from application of digitalSignatureReference. +
Implemented as the digital signature format specified in <<IHO_S_100,part=15>>.

| defaultLocale | 1 | | PT_Locale | See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

| otherLocale | 0..* | | PT_Locale | See <<fig_32>> and <<IHO_S_100,locality:appendix=4a-D>>.

|===


[[sec_14.4]]
=== Exchange set catalogue and metadata

Frequently datasets are packaged and distributed as composite exchange
sets by third party vendors. An exchange set could contain datasets
sourced from different data producers. For example, an exchange set
may contain numerous dataset files, ancillary data files, discovery
metadata files and others. Exchange set metadata contains metadata
about the contents of the exchange set and metadata about the data
distributor.

[[sec_14.4.1]]
==== Exchange catalogue file

All S-127 Exchange Catalogue files must contain at least the mandatory
metadata elements in <<table_14.4>>.

[[table_14.4]]
.S100_ExchangeCatalogue
[cols="5"]
|===
h| Name h| Multiplicity h| Value h| Type h| Remarks

| S100_ExchangeCatalogue | | | Class |

| identifier | 1 | | S100_CatalogueIdentifier | See Notes below this table.

| contact | 1 | | S100_CataloguePointOfContact | No special constraints on the S-100 class.

| productSpecification | 0..1 | | S100_ProductSpecification
| Conditional on all the datasets using the same product specification. See note below this table for constraints on values.

| metadataLanguage | 1 | English | CharacterString
| All datasets conforming to this PS must use English language. A catalogue in English must be provided. Discovery metadata elements within catalogues have their own locale attributes and may be repeated in languages other than English.

| exchangeCatalogueName | 1 | CATALOG.XML | CharacterString | Catalogue filename

| exchangeCatalogueDescription | 1 | | CharacterString |

| exchangeCatalogueComment | 0..1 | | CharacterString | Any additional Information

| compressionFlag | 0..1 | | Boolean
| TRUE: compressed +
FALSE: not compressed +
If compressed, the method must be that specified in <<IHO_S_100,part=15>>.

| sourceMedia | 0..1 | | CharacterString |

| replacedData | 0..1 | | Boolean |

| dataReplacement | 0..1 | | CharacterString |

| datasetDiscoveryMetadata | 0..* | | Aggregation S100_DatasetDiscoveryMetadata |

| -- | 0..* | | Aggregation S100_CatalogueMetadata
| Metadata for the feature, portrayal, and interoperability catalogues, if any

| supportFileDiscoveryMetadata | 0..* | | Aggregation S100_SupportFileDiscoveryMetadata |

|===


NOTE: Attribute _productSpecification_: Class *S100_ProductSpecification*
is depicted in <<fig_32>> and defined in <<IHO_S_100,locality:appendix=4a-D>>. The
values of sub-attributes _name_ and _version_ must correspond to this
version of the S-127 product specification. (<<sec_4.2>>). The value
of sub-attribute _number_ must be the number assigned to this version
of the S-127 product specification in the GI registry.

NOTE: Attribute _catalogueIdentifier_: Class *S100_CatalogueIdentifier*
is depicted in <<fig_32>> and defined in <<IHO_S_100,locality:appendix=4a-D>>.
The value of sub-attribute _S100_CatalogueIdentifier>identifier_ must
be chosen so that a 1/1 mapping from exchange set name to catalogue
identifier is recommended. This assumes a system for assigning unique
names to exchange sets -- as opposed to datasets -- is developed,
either by the producer or in this specification. Note that an exchange
set may contain multiple datasets.

[[sec_14.5]]
=== Metadata about feature and other catalogues

*S100_CatalogueMetadata* describes feature, portrayal, and interoperability
catalogues. This is an optional element that allows for descriptions
of feature, interoperability, and portrayal catalogues that are delivered
within the exchange set. This class is described in
<<IHO_S_100,locality:appendix=4a-D>>. S-127 uses the S-100 class without
modification, with the following constraints on allowed values:

.  Attribute _productSpecification_: For feature and portrayal catalogues,
the values of sub-attributes _name_ and _version_ must correspond
to this version of the S-127 product specification. (<<sec_4.2>>).
For interoperability catalogues, the values of sub-attributes _name_
and _version_ must correspond to the appropriate version of the S-98
product specification.
.  Attribute _productSpecification_: The value of sub-attribute _number_
must be the number assigned to this version of the S-127 product specification
in the GI registry. For interoperability catalogues, the values of
sub-attribute _number_ must correspond to the appropriate version
of the S-98 product specification.
